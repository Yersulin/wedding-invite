<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Свадьба • Андрей & Анна</title>
  <meta name="description" content="Сайт‑пригласительный: таймер, фото пары, локация, карта (Google) и ссылка в 2ГИС, RU/KZ, музыка." />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;700&display=swap" rel="stylesheet">
  <style>
    :root{ --bg:#f6f5f2; --ink:#121212; --sub:#6b6b6b; --rule:#dedbd3; --accent:#0f0f0f; }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; background:var(--bg); color:var(--ink);
      font-family:"Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; letter-spacing:.01em}
    .container{max-width:1120px; margin:0 auto; padding:24px 20px;}
    header{border-bottom:1px solid var(--rule);
      display:flex; align-items:center; justify-content:space-between; gap:16px; padding:14px 0 16px;}
    .brand{font-family:"Playfair Display", serif; font-size:18px; letter-spacing:.08em; text-transform:uppercase}
    .date-chip{font-size:14px; color:var(--sub); letter-spacing:.06em}
    .header-left{display:flex; align-items:center; gap:14px}
    .mono{width:40px; height:40px; border:1px solid var(--ink); border-radius:50%; display:grid; place-items:center;
          font-family:"Playfair Display", serif; font-weight:700; font-size:16px; letter-spacing:.06em; background:#fff}
    .lang-switch{display:flex; gap:6px}
    .chip{border:1px solid var(--rule); background:#fff; padding:8px 10px; border-radius:999px; font-size:12px; text-transform:uppercase; letter-spacing:.06em; cursor:pointer}
    .chip.active{border-color:var(--ink); background:var(--ink); color:#fff}
    .sound-btn{border:1px solid var(--ink); background:#fff; color:var(--ink); border-radius:999px; padding:8px 12px;
      font-size:12px; letter-spacing:.06em; text-transform:uppercase; cursor:pointer}
    .sound-btn.pulse{animation:pulse 1.1s ease-in-out infinite}
    @keyframes pulse{0%{box-shadow:0 0 0 0 rgba(0,0,0,.15)} 70%{box-shadow:0 0 0 10px rgba(0,0,0,0)} 100%{box-shadow:0 0 0 0 rgba(0,0,0,0)}}
    .hero{padding:56px 0 18px}
    .names{font-family:"Playfair Display", serif; font-weight:600; line-height:1.06;
      font-size: clamp(44px, 7.2vw, 96px); letter-spacing:.01em; text-align:center;}
    .amp{font-weight:400; opacity:.65; padding:0 .15em}
    .subtitle{margin-top:14px; text-align:center; color:var(--sub); font-size:16px; letter-spacing:.08em; text-transform:uppercase;}
    .rule{height:1px; background:var(--rule); margin:28px 0}
    .timer{display:grid; grid-template-columns:repeat(4, minmax(120px,1fr)); gap:14px; margin:26px 0 10px;}
    .card{background:#fff; border:1px solid var(--rule); border-radius:18px; padding:22px 20px; text-align:center;}
    .card .num{font-family:"Playfair Display", serif; font-size:42px; line-height:1;}
    .card .label{margin-top:8px; font-size:13px; color:var(--sub); letter-spacing:.08em; text-transform:uppercase}
    .section-title{margin:36px 0 8px; font-family:"Playfair Display", serif; font-size:28px; font-weight:600;}
    .grid{display:grid; grid-template-columns: 1.05fr .95fr; gap:24px; align-items:start;}
    .location-box{background:#fff; border:1px solid var(--rule); border-radius:18px; padding:22px 22px 18px;}
    .location-row{display:grid; grid-template-columns:108px 1fr; gap:14px; padding:10px 0; border-bottom:1px solid var(--rule)}
    .location-row:last-child{border-bottom:0}
    .k{color:var(--sub); letter-spacing:.08em; text-transform:uppercase; font-size:12px; padding-top:2px}
    .v{font-size:16px; line-height:1.5}
    .map-wrap{position:relative; border-radius:18px; overflow:hidden; border:1px solid var(--rule); background:#fff}
    .map{width:100%; height:420px; border:0; filter:grayscale(1) contrast(1.05)}
    .actions{margin-top:14px; display:flex; gap:10px; flex-wrap:wrap}
    .btn{appearance:none; border:1px solid var(--ink); background:var(--accent); color:#fff;
      padding:12px 18px; border-radius:999px; font-size:14px; letter-spacing:.06em; text-transform:uppercase;}
    .btn.secondary{background:#fff; color:var(--ink); border-color:var(--rule)}
    footer{padding:40px 0 60px; text-align:center; color:var(--sub); font-size:13px}
    @media (max-width: 860px){ .grid{grid-template-columns:1fr} .map{height:360px} }
    @media (max-width: 560px){ header{flex-direction:column; align-items:flex-start} .timer{grid-template-columns:repeat(2, 1fr)} }
    /* --- Фото секция --- */ 
    .photos{margin-top:10px}
    .photos-grid{display:grid; grid-template-columns:1fr 1fr; gap:16px}
    .photo-card{background:#fff; border:1px solid var(--rule); border-radius:18px; overflow:hidden}
    .photo-wrap{aspect-ratio:3/4; width:100%; overflow:hidden; background:#eee}
    .photo-wrap img{width:100%; height:100%; object-fit:cover; display:block}
    .caption{padding:12px 14px; font-size:14px; color:var(--sub); text-align:center}
    @media (max-width: 720px){ .photos-grid{grid-template-columns:1fr} .photo-wrap{aspect-ratio:4/5} }
  </style>
</head>
<body>
  <!-- Аудиоплеер -->
  <audio id="bgm" src="music.mp3" preload="auto" loop playsinline></audio>

  <div class="container">
    <header>
      <div class="header-left">
        <div class="mono" aria-label="Monogram">A&A</div>
        <div class="brand">Wedding Invitation</div>
      </div>
      <div style="display:flex; align-items:center; gap:12px">
        <button class="sound-btn" id="soundBtn" aria-pressed="false" title="Включить/выключить музыку">Звук: выкл</button>
        <div class="lang-switch" role="tablist" aria-label="Язык">
          <button class="chip active" data-lang="ru" id="langRU" role="tab" aria-selected="true">RU</button>
          <button class="chip" data-lang="kz" id="langKZ" role="tab" aria-selected="false">KZ</button>
        </div>
        <div class="date-chip" id="headerDate">1 ноября 2025</div>
      </div>
    </header>

    <section class="hero">
      <h1 class="names">Андрей <span class="amp">&</span> Анна</h1>
      <div class="subtitle" id="subtitleLine">Торжество • Суббота • 19:00</div>
      <div class="rule"></div>
      <div class="timer">
        <div class="card"><div class="num" id="days">—</div><div class="label" id="labDays">Дней</div></div>
        <div class="card"><div class="num" id="hours">—</div><div class="label" id="labHours">Часов</div></div>
        <div class="card"><div class="num" id="mins">—</div><div class="label" id="labMins">Минут</div></div>
        <div class="card"><div class="num" id="secs">—</div><div class="label" id="labSecs">Секунд</div></div>
      </div>
    </section>

    <!-- Фото пары -->
    <section class="photos">
      <h2 class="section-title" id="sectionPhotos">Наши фото</h2>
      <div class="photos-grid">
        <figure class="photo-card">
          <div class="photo-wrap">
            <img src="andrey.jpeg" alt="Андрей" loading="lazy" />
          </div>
          <figcaption class="caption">Андрей</figcaption>
        </figure>
        <figure class="photo-card">
          <div class="photo-wrap">
            <img src="anna.jpeg" alt="Анна" loading="lazy" />
          </div>
          <figcaption class="caption">Анна</figcaption>
        </figure>
      </div>
    </section>

    <section>
      <h2 class="section-title" id="sectionLocation">Локация</h2>
      <div class="grid">
        <div class="location-box">
          <div class="location-row">
            <div class="k" id="labelPlace">Место</div>
            <div class="v" id="placeName">Чу</div>
          </div>
          <div class="location-row">
            <div class="k" id="labelAddress">Адрес</div>
            <div class="v" id="placeAddr">Жамбылская область, Казахстан</div>
          </div>
          <div class="location-row">
            <div class="k" id="labelGuests">Сбор гостей</div>
            <div class="v">18:30 • Начало церемонии в 19:00</div>
          </div>
          <div class="actions">
            <a class="btn" id="mapsBtn" target="_blank" rel="noopener">Открыть в 2ГИС</a>
            <button class="btn secondary" id="addToCalBtn" title="Добавить событие в календарь (.ics)">Добавить в календарь</button>
          </div>
        </div>
        <div class="map-wrap" id="mapWrap">
          <iframe class="map" id="gmap" loading="lazy" referrerpolicy="no-referrer-when-downgrade"
            src="https://www.google.com/maps?q=%D0%A7%D1%83,%20%D0%96%D0%B0%D0%BC%D0%B1%D1%8B%D0%BB%D1%8C%D1%81%D0%BA%D0%B0%D1%8F%20%D0%BE%D0%B1%D0%BB%D0%B0%D1%81%D1%82%D1%8C&output=embed">
          </iframe>
        </div>
      </div>
    </section>

    <footer id="footerText">С любовью • Андрей & Анна • 2025</footer>
  </div>

  <script>
    // ===== Настройки события =====
    const EVENT_ISO = "2025-11-01T19:00:00+05:00"; // Asia/Almaty (+05:00)
    const PLACE_NAME = "Чу";
    const PLACE_ADDR = "Жамбылская область, Казахстан";
    const MAPS_QUERY = "Чу, Жамбылская область"; // для кнопки 2ГИС

    // ===== Таймер =====
    const targetDate = new Date(EVENT_ISO);
    const headerDateEl = document.getElementById('headerDate');

    function pad(n){return String(n).padStart(2,'0');}
    function renderHeaderDate(lang){
      const dict = i18n[lang];
      const d = targetDate.getDate();
      const m = dict.months[targetDate.getMonth()];
      const y = targetDate.getFullYear();
      headerDateEl.textContent = `${d} ${m} ${y}`;
    }
    function tick(){
      const now = new Date();
      let diff = Math.floor((targetDate.getTime() - now.getTime())/1000);
      if(diff < 0) diff = 0;
      const days = Math.floor(diff/86400); diff -= days*86400;
      const hours = Math.floor(diff/3600); diff -= hours*3600;
      const mins = Math.floor(diff/60); diff -= mins*60;
      const secs = diff;
      document.getElementById('days').textContent = pad(days);
      document.getElementById('hours').textContent = pad(hours);
      document.getElementById('mins').textContent = pad(mins);
      document.getElementById('secs').textContent = pad(secs);
    }
    tick(); setInterval(tick, 1000);

    // ===== Кнопка 2ГИС (ссылка) =====
    const mapsBtn = document.getElementById('mapsBtn');
    mapsBtn.href = `https://2gis.kz/search/${encodeURIComponent(MAPS_QUERY)}`;

    // ===== .ics =====
    function downloadICS(){
      const dt = new Date(EVENT_ISO);
      const dtEnd = new Date(dt.getTime() + 3*60*60*1000);
      const fmt = (x)=> x.toISOString().replace(/[-:]/g,'').replace(/\.\\d{3}Z$/,'Z');
      const ics = [
        'BEGIN:VCALENDAR','VERSION:2.0','PRODID:-//Wedding Invite//RU-KZ//','CALSCALE:GREGORIAN','METHOD:PUBLISH',
        'BEGIN:VEVENT',
        'UID:'+ (self.crypto?.randomUUID?.() || Math.random().toString(36).slice(2)),
        'DTSTAMP:'+ fmt(new Date()),
        'DTSTART:'+ fmt(dt),'DTEND:'+ fmt(dtEnd),
        'SUMMARY:' + 'Свадьба: ' + PLACE_NAME,
        'LOCATION:' + PLACE_ADDR,
        'DESCRIPTION:' + 'С любовью ждём вас! ' + PLACE_NAME + ', ' + PLACE_ADDR,
        'END:VEVENT','END:VCALENDAR'
      ].join('\\r\\n');
      const blob = new Blob([ics], {type:'text/calendar;charset=utf-8'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'wedding-invite.ics'; a.click();
      URL.revokeObjectURL(url);
    }
    document.getElementById('addToCalBtn').addEventListener('click', downloadICS);

    // ===== Локализация RU/KZ =====
    const i18n = {
      ru: {
        subtitlePrefix: 'Торжество',
        dow: ['Воскресенье','Понедельник','Вторник','Среда','Четверг','Пятница','Суббота'],
        months: ['января','февраля','марта','апреля','мая','июня','июля','августа','сентября','октября','ноября','декабря'],
        timer: {days:'Дней', hours:'Часов', mins:'Минут', secs:'Секунд'},
        sectionLocation:'Локация',
        labels:{place:'Место', address:'Адрес', guests:'Сбор гостей'},
        mapsBtn:'Открыть в 2ГИС',
        calBtn:'Добавить в календарь',
        footer:'С любовью • Андрей & Анна • 2025'
      },
      kz: {
        subtitlePrefix: 'Той',
        dow: ['Жексенбі','Дүйсенбі','Сейсенбі','Сәрсенбі','Бейсенбі','Жұма','Сенбі'],
        months: ['қаңтар','ақпан','наурыз','сәуір','мамыр','маусым','шілде','тамыз','қыркүйек','қазан','қараша','желтоқсан'],
        timer: {days:'Күн', hours:'Сағат', mins:'Минут', secs:'Секунд'},
        sectionLocation:'Орын',
        labels:{place:'Орын', address:'Мекенжай', guests:'Қонақтар жиналуы'},
        mapsBtn:'2ГИС-та ашу',
        calBtn:'Күнтізбеге қосу',
        footer:'Махаббатпен • Андрей & Анна • 2025'
      }
    };
    let LANG = localStorage.getItem('invite_lang') || 'ru';
    function applyLang(){
      const t = i18n[LANG];
      renderHeaderDate(LANG);
      const subtitle = document.getElementById('subtitleLine');
      const dow = t.dow[targetDate.getDay()];
      subtitle.textContent = `${t.subtitlePrefix} • ${dow} • 19:00`;
      document.getElementById('labDays').textContent  = t.timer.days;
      document.getElementById('labHours').textContent = t.timer.hours;
      document.getElementById('labMins').textContent  = t.timer.mins;
      document.getElementById('labSecs').textContent  = t.timer.secs;
      document.getElementById('sectionLocation').textContent = t.sectionLocation;
      document.getElementById('labelPlace').textContent  = t.labels.place;
      document.getElementById('labelAddress').textContent= t.labels.address;
      document.getElementById('labelGuests').textContent = t.labels.guests;
      document.getElementById('mapsBtn').textContent = t.mapsBtn;
      document.getElementById('addToCalBtn').textContent = t.calBtn;
      document.getElementById('footerText').textContent = t.footer;
      document.getElementById('langRU').classList.toggle('active', LANG==='ru');
      document.getElementById('langKZ').classList.toggle('active', LANG==='kz');
      document.documentElement.lang = (LANG==='ru' ? 'ru' : 'kk');
      // Фото секция заголовок
      document.getElementById('sectionPhotos').textContent = (LANG==='ru' ? 'Наши фото' : 'Біздің фотолар');
    }
    document.getElementById('langRU').addEventListener('click', ()=>{ LANG='ru'; localStorage.setItem('invite_lang', LANG); applyLang(); });
    document.getElementById('langKZ').addEventListener('click', ()=>{ LANG='kz'; localStorage.setItem('invite_lang', LANG); applyLang(); });
    applyLang();

    // ===== Музыка =====
    const audio = document.getElementById('bgm');
    const soundBtn = document.getElementById('soundBtn');
    let playing = true;
    function updateSoundBtn(){ soundBtn.textContent = playing ? 'Звук: вкл' : 'Звук: выкл'; soundBtn.setAttribute('aria-pressed', String(playing)); }
    async function tryAutoplay(){
      try{ await audio.play(); playing = true; soundBtn.classList.remove('pulse'); }
      catch(e){ playing = false; soundBtn.classList.add('pulse');
        const unlock = async ()=>{ try{ await audio.play(); playing = true; updateSoundBtn(); soundBtn.classList.remove('pulse'); }catch(_){}; document.removeEventListener('click', unlock, { once:true }); document.removeEventListener('touchstart', unlock, { once:true }); };
        document.addEventListener('click', unlock, { once:true });
        document.addEventListener('touchstart', unlock, { once:true }); }
      updateSoundBtn(); }
    soundBtn.addEventListener('click', async ()=>{ if(audio.paused){ try{ await audio.play(); playing = true; }catch(_){} } else { audio.pause(); playing = false; } updateSoundBtn(); });
    if (document.readyState === 'complete' || document.readyState === 'interactive') { setTimeout(tryAutoplay, 0); } else { document.addEventListener('DOMContentLoaded', tryAutoplay); }
  </script>
</body>
</html>
