<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Свадьба • Андрей & Анна</title>
  <meta name="description" content="Сайт-пригласительный: таймер, фото пары, место проведения, карта (Google), RU/KZ, музыка, параллакс по всей странице." />
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600&family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f5efe6; --ink:#2b2a28; --sub:#6f675f; --rule:#e6dfd6;
      --accent:#3b352e; --chip:#fff8f0; --gold:#d8c7ad;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; background:var(--bg); color:var(--ink);
      font-family:"Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; letter-spacing:.01em}

    .container{max-width:1120px; margin:0 auto; padding:24px 20px;}
    header{border-bottom:1px solid var(--rule); display:flex; align-items:center; justify-content:space-between; gap:16px; padding:14px 0 16px;}
    .brand{font-family:"Playfair Display", serif; font-size:18px; letter-spacing:.08ем; text-transform:uppercase}
    .date-chip{font-size:14px; color:var(--sub); letter-spacing:.06em}
    .header-left{display:flex; align-items:center; gap:14px}
    .mono{width:40px; height:40px; border:1px solid var(--ink); border-radius:50%; display:grid; place-items:center;
      font-family:"Playfair Display", serif; font-weight:700; font-size:16px; letter-spacing:.06em; background:#fff}
    .lang-switch{display:flex; gap:6px}
    .chip{border:1px solid var(--rule); background:var(--chip); padding:8px 10px; border-radius:999px; font-size:12px; text-transform:uppercase; letter-spacing:.06em; cursor:pointer}
    .chip.active{border-color:var(--ink); background:var(--ink); color:#fff}

    .hero{padding:56px 0 18px}
    .names{font-family:"Playfair Display", serif; font-weight:600; line-height:1.06;
      font-size: clamp(44px, 7.2vw, 96px); letter-spacing:.01em; text-align:center;}
    .amp{font-weight:400; opacity:.65; padding:0 .15em}
    .subtitle{margin-top:10px; text-align:center; color:var(--sub); font-size:16px; letter-spacing:.08em; text-transform:uppercase;}
    .rule{height:1px; background:var(--rule); margin:28px 0}

    /* ——— ТОЧНО как просил: hero-banner ——— */
    .hero-banner{
      position: relative;
      padding: 110px 0 72px;
      border-radius: 18px;
      background: url('back.png') center/cover no-repeat transparent;
      text-align:center;
    }
    .hero-title{
      display:inline-block; padding:16px 22px; border-radius:16px;
      background: rgba(255,255,255,.35);
      -webkit-backdrop-filter: blur(3px) saturate(1.1);
      backdrop-filter: blur(3px) saturate(1.1);
    }
    .hero-title .names{color:#1e1e1e; text-shadow:0 1px 1px rgba(255,255,255,.6), 0 2px 14px rgba(0,0,0,.18); margin:0;}
    .hero-title .subtitle{color:#2a2a2a; text-shadow:0 1px 1px rgba(255,255,255,.6), 0 2px 12px rgba(0,0,0,.18); margin:6px 0 0;}

    .timer{display:grid; grid-template-columns:repeat(4, minmax(120px,1fr)); gap:14px; margin:26px 0 10px;}
    .card{background:#fff; border:1px solid var(--rule); border-radius:18px; padding:22px 20px; text-align:center; box-shadow:0 1px 0 rgba(0,0,0,.02)}
    .card .num{font-family:"Playfair Display", serif; font-size:42px; line-height:1;}
    .card .label{margin-top:8px; font-size:13px; color:var(--sub); letter-spacing:.08em; text-transform:uppercase}

    .invite-card{margin:16px auto 0; max-width:820px; position:relative; background:linear-gradient(180deg,#fff 0%,#fffaf2 100%);
      border:2px solid var(--gold); border-radius:22px; padding:22px 22px; box-shadow:
      inset 0 1px 0 rgba(255,255,255,.85), inset 0 -8px 20px rgba(216,199,173,.15), 0 10px 30px rgba(43,42,40,.07);
      outline:1px solid #f2eadf; outline-offset:-6px;}
    .invite-card:before,.invite-card:after{content:""; position:absolute; inset:10px; border-radius:16px; border:1px dashed rgba(216,199,173,.7); pointer-events:none;}
    .invite-text{font-family:"Cormorant Garamond", serif; font-size:clamp(18px, 2.3vw, 21px); line-height:1.65; color:var(--ink); text-align:center; margin:0; letter-spacing:.01em;}

    /* ——— ПАРАЛЛАКС: фиксированный слой. ВХОД СНИЗУ, ПРОХОД ДО ВВЕРХА ——— */
    .upground{
      position: fixed; inset: 0; z-index: 999; pointer-events: none;
      overflow: hidden;
    }
    .up{
      position:absolute; top: 100vh; /* базовая точка — за нижним краем экрана */
      will-change: transform, opacity;
      opacity:0; transform: translate3d(0, 0, 0) scale(0.98);
      filter: drop-shadow(0 8px 18px rgba(0,0,0,.16));
      transition: opacity .5s ease-out;
      image-rendering: -webkit-optimize-contrast;
    }
    /* расположение у краёв и размеры */
    .up--1{ left: 2.5vw; width: clamp(140px, 34vw, 320px); }
    .up--2{ left: 7vw;   width: clamp(120px, 30vw, 280px); }
    .up--3{ right: 2.5vw; width: clamp(140px, 36vw, 340px); }

    @media (max-width: 480px){
      .up--1{ left: 2vw;  width: clamp(140px, 48vw, 360px); }
      .up--2{ left: 6vw;  width: clamp(120px, 44vw, 320px); }
      .up--3{ right: 2vw; width: clamp(140px, 52vw, 380px); }
    }

    /* Фото секция */
    .section-title{margin:36px 0 8px; font-family:"Playfair Display", serif; font-size:28px; font-weight:600;}
    .photos{margin-top:10px}
    .photos-grid{display:grid; grid-template-columns:1fr 1fr; gap:16px}
    @media (max-width: 900px){ .photos-grid{ grid-template-columns:1fr; gap:20px; } .photo-card{ margin:0 auto; max-width:520px; } }
    .photo-card{background:#fff; border:1px solid var(--rule); border-radius:26px; overflow:hidden}
    .photo-wrap{aspect-ratio:3/4; width:100%; overflow:hidden; background:#eee; border-radius:26px; border:1px solid rgba(0,0,0,.04)}
    .photo-wrap img{width:100%; height:100%; object-fit:cover; display:block; border-radius:26px}
    .caption{padding:12px 14px; font-size:14px; color:var(--sub); text-align:center}

    /* Место проведения */
    .grid{display:grid; grid-template-columns: 1.05fr .95fr; gap:24px; align-items:start;}
    .location-box{background:#fff; border:1px solid var(--rule); border-radius:18px; padding:22px 22px 18px;}
    .location-row{display:grid; grid-template-columns:108px 1fr; gap:14px; padding:10px 0; border-bottom:1px solid var(--rule)}
    .location-row:last-child{border-bottom:0}
    .k{color:var(--sub); letter-spacing:.08em; text-transform:uppercase; font-size:12px; padding-top:2px}
    .v{font-size:16px; line-height:1.5}
    .map-wrap{position:relative; border-radius:18px; overflow:hidden; border:1px solid var(--rule); background:#fff}
    .map{width:100%; height:420px; border:0; filter:grayscale(1) contrast(1.05)}
    .actions{margin-top:14px; display:flex; gap:10px; flex-wrap:wrap}
    .btn{appearance:none; border:1px solid var(--ink); background:var(--accent); color:#fff; padding:12px 18px; border-radius:999px; font-size:14px; letter-spacing:.06em; text-transform:uppercase;}
    .btn.secondary{background:#fff; color:var(--ink); border-color:var(--rule)}
    footer{padding:40px 0 60px; text-align:center; color:var(--sub); font-size:13px}

    @media (max-width: 1024px){ .grid{grid-template-columns:1fr} .map{height:360px} }
    @media (max-width: 860px){ header{flex-direction:column; align-items:flex-start} .timer{grid-template-columns:repeat(2, 1fr)} }

    /* Оверлей для автоплея */
    .sound-overlay{position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,.35); backdrop-filter:blur(2px); z-index:1000;}
    .sound-overlay .panel{background:#fff; border:1px solid var(--rule); border-radius:16px; padding:16px 18px; text-align:center; max-width:360px}
    .sound-overlay .panel h3{margin:0 0 8px; font-family:"Playfair Display", serif}
    .sound-overlay .panel p{margin:0 0 12px; color:var(--sub)}
    .sound-overlay .panel button{border:1px solid var(--ink); background:var(--accent); color:#fff; border-radius:999px; padding:10px 14px; cursor:pointer}
  </style>
</head>
<body>
  <!-- ВЕРХНИЙ ПАРАЛЛАКС-СЛОЙ НА ВСЮ СТРАНИЦУ (вход снизу, проходит до верха) -->
  <div class="upground" aria-hidden="true">
    <img src="up1.png" alt="" class="up up--1"
         data-start="0.00" data-end="0.40" data-speed="0.30">
    <img src="up2.png" alt="" class="up up--2"
         data-start="0.40" data-end="0.99" data-speed="0.30">
    <img src="up3.png" alt="" class="up up--3"
         data-start="0.20" data-end="0.80" data-speed="0.30">
  </div>

  <!-- Музыка -->
  <audio id="bgm" src="music.mp3" preload="auto" loop playsinline></audio>
  <div class="sound-overlay" id="soundGate" aria-hidden="true">
    <div class="panel">
      <h3>Включите звук</h3>
      <p>Браузер просит разрешение на воспроизведение музыки.</p>
      <button id="enableSound">Включить</button>
    </div>
  </div>

  <div class="container">
    <header>
      <div class="header-left">
        <div class="mono" aria-label="Monogram">A&A</div>
        <div class="brand">Anna & Andrey</div>
      </div>
      <div style="display:flex; align-items:center; gap:12px">
        <div class="lang-switch" role="tablist" aria-label="Язык">
          <button class="chip active" data-lang="ru" id="langRU" role="tab" aria-selected="true">RU</button>
          <button class="chip" data-lang="kz" id="langKZ" role="tab" aria-selected="false">KZ</button>
        </div>
        <div class="date-chip" id="headerDate">1 ноября 2025</div>
      </div>
    </header>

    <section class="hero">
      <div class="hero-banner">
        <div class="hero-title">
          <h1 class="names">Андрей <span class="amp">&</span> Анна</h1>
          <div class="subtitle" id="subtitleLine">Свадьба • Суббота • 18:00</div>
        </div>
      </div>

      <div class="rule"></div>

      <div class="timer">
        <div class="card"><div class="num" id="days">—</div><div class="label" id="labDays">Дней</div></div>
        <div class="card"><div class="num" id="hours">—</div><div class="label" id="labHours">Часов</div></div>
        <div class="card"><div class="num" id="mins">—</div><div class="label" id="labMins">Минут</div></div>
        <div class="card"><div class="num" id="secs">—</div><div class="label" id="labSecs">Секунд</div></div>
      </div>

      <div class="invite-card">
        <p class="invite-text" id="inviteText">
          Дорогие гости! С огромной радостью сообщаем Вам о том, что мы вступаем в брак и создаем нашу семью.
          Приглашаем вас разделить с нами этот особенный вечер. Ваше присутствие сделает наш день поистине незабываемым!
        </p>
      </div>
    </section>

    <!-- Фото пары -->
    <section class="photos">
      <h2 class="section-title" id="sectionPhotos">Наши фото</h2>
      <div class="photos-grid">
        <figure class="photo-card">
          <div class="photo-wrap"><img src="andrey.jpeg" alt="Андрей" loading="lazy" /></div>
          <figcaption class="caption">Андрей</figcaption>
        </figure>
        <figure class="photo-card">
          <div class="photo-wrap"><img src="anna.jpeg" alt="Анна" loading="lazy" /></div>
          <figcaption class="caption">Анна</figcaption>
        </figure>
      </div>
    </section>

    <!-- Место проведения -->
    <section>
      <h2 class="section-title" id="sectionLocation">Место проведения</h2>
      <div class="grid">
        <div class="location-box">
          <div class="location-row">
            <div class="k" id="labelPlace">Место</div>
            <div class="v" id="placeName">AI-SULTAN HALL</div>
          </div>
          <div class="location-row">
            <div class="k" id="labelAddress">Адрес</div>
            <div class="v" id="placeAddr">A 358, Казахстан (координаты: 43.643165, 73.752697)</div>
          </div>
          <div class="location-row">
            <div class="k" id="labelGuests">Сбор гостей</div>
            <div class="v">17:30 • Начало церемонии в 18:00</div>
          </div>
          <div class="actions">
            <a class="btn" id="mapsBtn" target="_blank" rel="noopener">Открыть в Google Maps</a>
            <button class="btn secondary" id="addToCalBtn" title="Добавить событие в календарь (.ics)">Добавить в календарь</button>
          </div>
        </div>
        <div class="map-wrap" id="mapWrap">
          <iframe class="map" id="gmap" loading="lazy" referrerpolicy="no-referrer-when-downgrade"
            src="https://www.google.com/maps?q=43.643165,73.752697&z=17&output=embed"></iframe>
        </div>
      </div>
    </section>

    <footer id="footerText">С любовью • Андрей & Анна • 2025</footer>
  </div>

  <script>
    /* ===== Локаль и дата ===== */
    const EVENT_ISO = "2025-11-01T18:00:00+05:00";
    const targetDate = new Date(EVENT_ISO);
    const headerDateEl = document.getElementById('headerDate');
    const i18n = {
      ru:{subtitlePrefix:'Свадьба',dow:['Воскресенье','Понедельник','Вторник','Среда','Четверг','Пятница','Суббота'],
          months:['января','февраля','марта','апреля','мая','июня','июля','августа','сентября','октября','ноября','декабря'],
          mapsBtn:'Открыть в Google Maps',footer:'С любовью • Андрей & Анна • 2025',
          invite:'Дорогие гости! С огромной радостью сообщаем Вам о том, что мы вступаем в брак и создаем нашу семью. Приглашаем вас разделить с нами этот особенный вечер. Ваше присутствие сделает наш день поистине незабываемым!'},
      kz:{subtitlePrefix:'Той',dow:['Жексенбі','Дүйсенбі','Сейсенбі','Сәрсенбі','Бейсенбі','Жұма','Сенбі'],
          months:['қаңтар','ақпан','наурыз','сәуір','мамыр','маусым','шілде','тамыз','қазан','қараша','желтоқсан'],
          mapsBtn:'Google Maps-та ашу',footer:'Махаббатпен • Андрей & Анна • 2025',
          invite:'Құрметті қонақтар! Біз некеге тұрып, өз отбасымызды құратынымызды үлкен қуанышпен хабарлаймыз. Осы ерекше кешті бізбен бірге атап өтуге шақырамыз. Сіздердің қатысуларыңыз біздің күнімізді шын мәнінде ұмытылмас етеді!'}
    };
    let LANG = localStorage.getItem('invite_lang') || 'ru';
    function renderHeaderDate(lang){
      const d = targetDate.getDate();
      const m = i18n[lang].months[targetDate.getMonth()];
      const y = targetDate.getFullYear();
      headerDateEl.textContent = `${d} ${m} ${y}`;
    }
    function applyLang(){
      const t = i18n[LANG];
      renderHeaderDate(LANG);
      document.getElementById('subtitleLine').textContent =
        `${t.subtitlePrefix} • ${t.dow[targetDate.getDay()]} • 18:00`;
      document.getElementById('mapsBtn').textContent = t.mapsBtn;
      document.getElementById('footerText').textContent = t.footer;
      document.getElementById('inviteText').textContent = t.invite;
      document.getElementById('langRU').classList.toggle('active', LANG==='ru');
      document.getElementById('langKZ').classList.toggle('active', LANG==='kz');
      document.documentElement.lang = (LANG==='ru' ? 'ru' : 'kk');
      document.getElementById('sectionPhotos').textContent = (LANG==='ru' ? 'Наши фото' : 'Біздің фотолар');
    }
    document.getElementById('langRU').addEventListener('click', ()=>{ LANG='ru'; localStorage.setItem('invite_lang', LANG); applyLang(); });
    document.getElementById('langKZ').addEventListener('click', ()=>{ LANG='kz'; localStorage.setItem('invite_lang', LANG); applyLang(); });
    applyLang();

    /* ===== Таймер ===== */
    const daysEl = document.getElementById('days');
    const hoursEl = document.getElementById('hours');
    const minsEl = document.getElementById('mins');
    const secsEl = document.getElementById('secs');
    function pad(n){return String(n).padStart(2,'0');}
    function tick(){
      const now = new Date();
      let diff = Math.floor((targetDate.getTime() - now.getTime())/1000);
      if(diff < 0) diff = 0;
      const days = Math.floor(diff/86400); diff -= days*86400;
      const hours = Math.floor(diff/3600); diff -= hours*3600;
      const mins = Math.floor(diff/60); diff -= mins*60;
      const secs = diff;
      daysEl.textContent = pad(days);
      hoursEl.textContent = pad(hours);
      minsEl.textContent = pad(mins);
      secsEl.textContent = pad(secs);
    }
    tick(); setInterval(tick, 1000);

    /* ===== Google Maps ===== */
    const GMAPS_URL = "https://www.google.com/maps/place/AI-SULTAN+HALL/@43.641568,73.7541741,17.04z/data=!4m6!3m5!1s0x389fe9004dbde3ad:0xd3b91d97d575564c!8m2!3d43.643165!4d73.752697!16s%2Fg%2F11mdqlgg__?entry=ttu&g_ep=EgoyMDI1MTAwOC4wIKXMDSoASAFQAw%3D%3D";
    document.getElementById('mapsBtn').href = GMAPS_URL;

    /* ===== Музыка автоплей ===== */
    const audio = document.getElementById('bgm');
    const gate = document.getElementById('soundGate');
    const enableBtn = document.getElementById('enableSound');
    async function ensurePlay(){ try { if (audio.paused) { await audio.play(); } } catch (e) { gate.style.display = 'flex'; } }
    if (document.readyState === 'complete' || document.readyState === 'interactive') { setTimeout(ensurePlay, 0); } else { document.addEventListener('DOMContentLoaded', ensurePlay); }
    document.addEventListener('visibilitychange', ()=>{ if (!document.hidden) ensurePlay(); });
    audio.addEventListener('pause', ()=>{ if (!document.hidden) ensurePlay(); });
    enableBtn.addEventListener('click', async ()=>{ try { await audio.play(); } finally { gate.style.display = 'none'; } }, { once:true });

    /* ===== ПАРАЛЛАКС: вход СНИЗУ, проходит ДО ВЕРХА ===== */
    const upLayer = document.querySelector('.upground');
    const ups = Array.from(upLayer.querySelectorAll('.up'));

    function clamp01(x){ return Math.max(0, Math.min(1, x)); }
    function getScrollProgress(){
      const doc = document.documentElement;
      const scrollTop = window.pageYOffset || doc.scrollTop || 0;
      const scrollable = Math.max(1, doc.scrollHeight - window.innerHeight);
      return scrollTop / scrollable; // 0..1
    }

    function renderUp(){
      const vh = window.innerHeight || 800;
      const t = getScrollProgress();        // общий прогресс страницы (0..1)
      const distance = 2.4 * vh;            // хватит, чтобы пройти весь экран и уйти выше

      ups.forEach(el=>{
        const start = parseFloat(el.dataset.start || '0.1');
        const end   = parseFloat(el.dataset.end   || '0.7');
        // speed оставляем для «характера», но не влияем им на покрытие
        // (иначе на низких значениях не дотянется до верха)
        const _speed = parseFloat(el.dataset.speed || '0.4');

        // локальный прогресс видимости
        const local = clamp01((t - start) / Math.max(1e-6, (end - start)));

        // Плавное появление/исчезновение
        if (t < start || t > end){
          el.style.opacity = 0;
        } else {
          let alpha = 0;
          if(local <= 0.15)       alpha = local / 0.15;                 // 0→1
          else if(local <= 0.85)  alpha = 1;                             // удержание
          else                    alpha = clamp01(1 - (local-0.85)/0.15);// 1→0
          el.style.opacity = alpha.toFixed(3);
        }

        // ТРАЕКТОРИЯ: top:100vh; от 0 до -distance (гарантированно дойдёт до верха)
        const y = - local * distance;
        el.style.transform = `translate3d(0, ${y.toFixed(2)}px, 0)`;
      });
    }

    let ticking = false;
    function onScroll(){
      if(!ticking){
        ticking = true;
        requestAnimationFrame(()=>{ renderUp(); ticking = false; });
      }
    }
    window.addEventListener('scroll', onScroll, {passive:true});
    window.addEventListener('resize', renderUp, {passive:true});

    Promise.all(ups.map(img => img.complete ? Promise.resolve() : new Promise(r=>img.addEventListener('load', r, {once:true}))))
      .then(renderUp);
  </script>
</body>
</html>
